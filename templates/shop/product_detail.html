{% extends 'shop/base.html' %}
{% load static %}

{% block content %}

<div class="pd-wrapper">

  <!-- IMAGE CARD -->
  <div class="pd-image-card">

    <!-- Main Image -->
    <img id="mainProductImage" src="{{ product.image.url }}" alt="{{ product.name }}" style="width:400px;height:auto;">

    <!-- Thumbnails -->
<div class="thumbnail-images" style="display:flex; gap:10px; margin-top:10px;">
  <!-- Main image as first thumbnail -->
  {% if product.image %}
    <img src="{{ product.image.url }}"
         class="pd-thumb active"
         onclick="changeImage(this)">
  {% endif %}

  <!-- Extra images -->
  {% for img in product.images.all %}
    <img src="{{ img.image.url }}"
         class="pd-thumb"
         onclick="changeImage(this)">
  {% endfor %}
</div>


  </div>

  <!-- INFO CARD -->
  <div class="pd-info-card">
    <h2 class="pd-title">{{ product.name }}</h2>

    <p class="pd-price">₹ {{ product.price }}</p>

    {% if product.available %}
      <p class="pd-stock in">✔ In Stock</p>
    {% else %}
      <p class="pd-stock out">✖ Out of Stock</p>
    {% endif %}
    <div class="pd-desc">{{ product.description }}</div>
   <div class="pd-det">{{ product.details }}</div>






    <div class="pd-buttons">

      <form method="POST" action="{% url 'cart_add' product.id %}">
        {% csrf_token %}
        <button type="submit" class="pd-cart-btn">Add to Cart</button>
      </form>

      <form method="POST" action="{% url 'buy_now' product.id %}">
        {% csrf_token %}
        <button type="submit" class="pd-buy-btn">Buy Now</button>
      </form>

    </div>
  </div>

</div>

<!-- JS FOR THUMBNAIL CLICK -->
<script>
function changeImage(el) {
    // Update main image
    document.getElementById("mainProductImage").src = el.src;

    // Remove active class from all thumbnails
    document.querySelectorAll(".pd-thumb").forEach(t => t.classList.remove("active"));

    // Add active class to clicked thumbnail
    el.classList.add("active");
}
</script>


{% endblock %}
